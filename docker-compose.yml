version: '3.8'

services:
  frenchio:
    build: .
    container_name: frenchio-addon
    ports:
      - "7777:7777"
    environment:
      # Optional: Set a custom port
      - PORT=7777
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "python", "-c", "import urllib.request; urllib.request.urlopen('http://localhost:7777/manifest.json')"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 5s

  # Optional: Add qBittorrent service for local streaming
  # Uncomment if you want qBittorrent in the same stack
  # qbittorrent:
  #   image: linuxserver/qbittorrent:latest
  #   container_name: qbittorrent
  #   environment:
  #     - PUID=1000
  #     - PGID=1000
  #     - TZ=Europe/Paris
  #     - WEBUI_PORT=8080
  #   volumes:
  #     - ./qbittorrent/config:/config
  #     - ./qbittorrent/downloads:/downloads
  #   ports:
  #     - "8080:8080"
  #     - "6881:6881"
  #     - "6881:6881/udp"
  #   restart: unless-stopped

